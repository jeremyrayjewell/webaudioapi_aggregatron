[build]
command = """
# Build synth_aggregatrex5000
echo "Building synth_aggregatrex5000..." &&
cd synth_aggregatrex5000 && npm ci && npm run build && cd .. &&
echo "synth_aggregatrex5000 build complete" &&

# Create dist structure with just working project for now
echo "Creating dist structure..." &&
mkdir -p dist &&
cp -r synth_aggregatrex5000/build dist/synth_aggregatrex5000 &&
echo '<html><head><title>WebAudio API Aggregatron</title><style>body{font-family:Arial,sans-serif;max-width:800px;margin:50px auto;padding:20px;background:#1a1a1a;color:#fff}h1{color:#e91e63;text-align:center}ul{list-style:none;padding:0}li{margin:15px 0}a{color:#03dac6;text-decoration:none;font-size:18px;display:block;padding:15px;background:#333;border-radius:8px;transition:background 0.3s}a:hover{background:#555}</style></head><body><h1>WebAudio API Projects</h1><ul><li><a href="/synth_aggregatrex5000/">ğŸ¹ Synth Aggregatrex 5000</a></li><li>ğŸ›ï¸ Synth Aggregatrex 6000 (3D) - Coming Soon</li><li>ğŸµ Melody Maker Ordnung - Coming Soon</li><li>ğŸ”Š Sample Segmenter Piecework - Coming Soon</li></ul></body></html>' > dist/index.html &&
echo "Deployment structure created successfully"
"""
publish = "dist"

[build.environment]
NODE_VERSION = "18"
NPM_FLAGS = "--silent"
CI = "false"

# Redirect each app's routes to its index.html
[[redirects]]
from = "/synth_aggregatrex5000/*"
to = "/synth_aggregatrex5000/index.html"
status = 200

[[redirects]]
from = "/synth_aggregatrex6000/*"
to = "/synth_aggregatrex6000/index.html"
status = 200

[[redirects]]
from = "/melodymaker_ordnung/*"
to = "/melodymaker_ordnung/index.html"
status = 200

[[redirects]]
from = "/samplesegmenter_piecework/*"
to = "/samplesegmenter_piecework/index.html"
status = 200